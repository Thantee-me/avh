(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{387:function(t,e,l){"use strict";var r={props:["dataselect"],data:function(){return{dialog:!1,form:{search:"",page:1,perpage:10},listitems:[],headers:[{text:"รหัสลูกค้า",sortable:!1,alige:"center",class:"title",value:"customer_code"},{text:"ชื่อลูกค้า",sortable:!1,alige:"center",class:"title",value:"customer_name"},{text:"เครดิต",sortable:!1,alige:"center",class:"title",value:"customer_cedit"},{text:"เลขประจำตัวผู้เสียภาษี",sortable:!1,alige:"center",class:"title",value:"customer_tax"},{text:"ที่อยู่",sortable:!1,alige:"center",class:"title",value:"customer_address"},{text:"เบอร์โทรศัพท์",sortable:!1,alige:"center",class:"title",value:"customer_tell"}],selectedcustomer:[]}},methods:{listdata:function(){var t=this;this.$axios.post("/customer/index",this.form).then((function(e){t.listitems=e.data})).catch((function(e){t.listitems={list:[],total_perpage:0}}))},open:function(data){this.selectedcustomer=data,this.dialog=!0}},watch:{dialog:function(t){1==t?this.listdata():this.form={search:"",page:1,perpage:10}}}},n=l(42),o=l(90),c=l.n(o),m=l(148),d=l(359),v=l(354),f=l(470),_=l(399),h=l(358),x=l(136),y=l(413),C=l(86),k=l(73),V=l(41),w=l(368),$=l(360),T=l(377),component=Object(n.a)(r,(function(){var t=this,e=t.$createElement,l=t._self._c||e;return l("v-dialog",{attrs:{persistent:"","max-width":"1200px"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[l("v-card",[l("v-card-title",{staticClass:"mx-1"},[l("v-list-item",{attrs:{"two-line":""}},[l("v-list-item-title",{staticClass:"headline blue-font1"},[t._v("ระบบจัดการลูกค้า")]),t._v(" "),l("v-list-item-icon",[l("v-icon",{attrs:{small:""},on:{click:function(e){t.dialog=!t.dialog}}},[t._v("fas fa-times")])],1)],1)],1),t._v(" "),l("v-card-text",{staticClass:"mx-1"},[l("v-layout",{staticClass:"container"},[l("v-data-table",{staticClass:"tablelist w-100 mt-3",attrs:{headers:t.headers,items:t.listitems.Customer,"item-key":"customer_id","show-select":"","hide-default-footer":""},scopedSlots:t._u([{key:"top",fn:function(){return[l("v-text-field",{staticClass:"input-search-table",attrs:{filled:"",placeholder:"search",rounded:"",dense:"","append-icon":"fas fa-search","hide-details":""},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.listdata()}},model:{value:t.form.search,callback:function(e){t.$set(t.form,"search",e)},expression:"form.search"}})]},proxy:!0},{key:"item.customer_cedit",fn:function(e){var l=e.item;return[t._v("\n                            "+t._s(l.customer_cedit)+" วัน \n                        ")]}},{key:"footer",fn:function(){return[l("v-pagination",{staticClass:"justify-end",attrs:{length:t.listitems.total_perpage,"total-visible":7,circle:"",color:"primary"},on:{click:function(e){return t.listdata()}},model:{value:t.form.page,callback:function(e){t.$set(t.form,"page",e)},expression:"form.page"}})]},proxy:!0}]),model:{value:t.selectedcustomer,callback:function(e){t.selectedcustomer=e},expression:"selectedcustomer"}})],1),t._v(" "),l("v-layout",{staticClass:"mt-3"},[l("v-spacer"),t._v(" "),l("v-flex",{staticClass:"text-right"},[l("v-btn",{staticClass:"btn-danger mx-1",on:{click:function(e){t.dialog=!t.dialog}}},[t._v("ยกเลิก")]),t._v(" "),l("v-btn",{staticClass:"btn-primary mx-1",on:{click:function(e){t.$emit("callback",t.selectedcustomer),t.dialog=!t.dialog}}},[t._v("ยืนยัน")])],1)],1)],1)],1)],1)}),[],!1,null,null,null),U=component.exports;c()(component,{VBtn:m.a,VCard:d.a,VCardText:v.a,VCardTitle:v.b,VDataTable:f.a,VDialog:_.a,VFlex:h.a,VIcon:x.a,VLayout:y.a,VListItem:C.a,VListItemIcon:k.a,VListItemTitle:V.c,VPagination:w.a,VSpacer:$.a,VTextField:T.a});var I={props:["type","dataForm"],components:{Modallistcustomer:U},computed:{newarraypermissionuser:function(){var t={},e="",l=-1;return this.permissionuser.forEach((function(r){if(e!=r.permissions_name){l++,e=r.permissions_name;var n={group:r.group,permissions_id:r.permissions_id,checkvalue:{permissions_id:r.permissions_id}},data={name:r.permissions_name,value:[n]};t[l]=data}else{n={group:r.group,permissions_id:r.permissions_id,checkvalue:{permissions_id:r.permissions_id}};t[l].value.push(n)}})),t}},data:function(){return{valid:!0,lazy:!1,form:{name:"",tell:"",email:"",password:"",position_id:"",branch_id:"",department_id:"",User_customerlist:[],User_permissions:[]},checkunique:[]}},methods:{verifyemail:function(){var t=this;this.$axios.post("/users/checkEmail",{email:this.form.email}).then((function(e){"fail"==e.data?t.checkunique=["The Email is Unique"]:t.checkunique=[]}))},addcustomer:function(data){this.form.User_customerlist=data}},mounted:function(){this.$nextTick((function(){"add"==this.type?this.form={name:"",tell:"",email:"",password:"",position_id:"",branch_id:"",department_id:"",User_customerlist:[],User_permissions:[]}:this.form=this.dataForm}))}},S=l(382),F=l(137),L=l(495),E=l(341),O=l(369),j=l(372),z=l(344),A=l(374),B=Object(n.a)(I,(function(){var t=this,e=t.$createElement,l=t._self._c||e;return l("div",[l("v-container",{attrs:{"grid-list-xs":""}},[l("v-card",{staticClass:"my-2"},[l("v-list-item",[l("v-list-item-title",{staticClass:"headline"},[t._v("สร้างบัญชีผู้ใช้")])],1),t._v(" "),l("v-list-item",[l("v-form",{ref:"form",attrs:{"lazy-validation":t.lazy},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[l("v-row",{staticClass:"py-2"},[l("v-col",{staticClass:"py-sm-0",attrs:{cols:"6",sm:"3"}},[l("v-text-field",{attrs:{label:"อีเมล์",outlined:"",dense:"",rules:[function(t){return!!t||"The input is required"}],readonly:"detail"==t.type,"error-messages":t.checkunique},on:{change:function(e){return t.verifyemail()}},model:{value:t.form.email,callback:function(e){t.$set(t.form,"email",e)},expression:"form.email"}})],1),t._v(" "),"add"==t.type?l("v-col",{staticClass:"py-sm-0",attrs:{cols:"6",sm:"3"}},[l("v-text-field",{attrs:{label:"รหัสผ่าน",type:"password",outlined:"",dense:"",rules:[function(t){return!!t||"The input is required"}]},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1):t._e(),t._v(" "),l("v-col",{staticClass:"py-sm-0",attrs:{cols:"6",sm:"3"}},[l("v-text-field",{attrs:{label:"ชื่อ - นามสกุล",outlined:"",dense:"",rules:[function(t){return!!t||"The input is required"}],readonly:"detail"==t.type},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),t._v(" "),l("v-col",{staticClass:"py-sm-0",attrs:{cols:"6",sm:"3"}},[l("v-text-field",{attrs:{label:"เบอร์โทร",outlined:"",dense:"",readonly:"detail"==t.type},model:{value:t.form.tell,callback:function(e){t.$set(t.form,"tell",e)},expression:"form.tell"}})],1),t._v(" "),l("v-col",{staticClass:"py-sm-0",attrs:{cols:"6",sm:"3"}},[l("v-autocomplete",{attrs:{label:"สาขา",outlined:"",items:t.branchname,"item-text":"name","item-value":"branch_id",rules:[function(t){return!!t||"The input is required"}],dense:"",readonly:"detail"==t.type},model:{value:t.form.branch_id,callback:function(e){t.$set(t.form,"branch_id",e)},expression:"form.branch_id"}})],1),t._v(" "),l("v-col",{staticClass:"py-sm-0",attrs:{cols:"6",sm:"3"}},[l("v-autocomplete",{attrs:{label:"ตำแหน่ง",outlined:"",items:t.positionname,"item-text":"position_name","item-value":"position_id",rules:[function(t){return!!t||"The input is required"}],dense:"",readonly:"detail"==t.type},model:{value:t.form.position_id,callback:function(e){t.$set(t.form,"position_id",e)},expression:"form.position_id"}})],1),t._v(" "),l("v-col",{staticClass:"py-sm-0",attrs:{cols:"6",sm:"3"}},[l("v-autocomplete",{attrs:{label:"แผนก",outlined:"",items:t.departmentname,"item-text":"department_name","item-value":"department_id",rules:[function(t){return!!t||"The input is required"}],dense:"",readonly:"detail"==t.type},model:{value:t.form.department_id,callback:function(e){t.$set(t.form,"department_id",e)},expression:"form.department_id"}})],1)],1)],1)],1)],1),t._v(" "),l("v-card",{staticClass:"my-2 pb-3"},[l("v-list-item",{staticClass:"pt-3"},[l("v-list-item-content",[l("v-list-item-title",{staticClass:"headline"},[t._v("กำหนดสิทธิ์")]),t._v(" "),l("v-list-item-subtitle",{staticClass:"subtitle-1"},[t._v("กรุณาเลือกเพื่อกำหนดสิทธิ์ให้บัญชีผู้ใช้")])],1)],1),t._v(" "),t._l(t.newarraypermissionuser,(function(i,e){return l("v-list-item",{key:e,staticClass:"row"},[l("v-col",{staticClass:"py-0",attrs:{cols:"4",sm:"8"}},[t._v(t._s(i.name))]),t._v(" "),t._l(i.value,(function(e,r){return l("v-col",{key:r,staticClass:"py-0",attrs:{cols:"4",sm:"2"}},[l("v-checkbox",{staticClass:"mx-1 checkbox-type1",attrs:{value:e.checkvalue,label:e.group,"hide-details":"",dense:"",readonly:"detail"==t.type},model:{value:t.form.User_permissions,callback:function(e){t.$set(t.form,"User_permissions",e)},expression:"form.User_permissions"}})],1)}))],2)}))],2),t._v(" "),4==t.form.position_id?l("v-flex",{staticClass:"mt-5"},[l("v-layout",[l("v-flex",[l("font",{staticClass:"blue-font1 headline"},[t._v("ระบบจัดการลูกค้า")]),t._v(" "),l("font",{staticClass:"red-font1 headline"},[t._v("(แสดงต่อเมื่อเลือกตำแหน่งเป็น Sale)")])],1),t._v(" "),l("v-spacer"),t._v(" "),"detail"!=t.type?l("v-flex",{staticClass:"text-right"},[l("v-btn",{staticClass:"btn-type1 ",attrs:{rounded:"",dense:""},on:{click:function(e){return t.$refs.listcustomer.open(t.form.User_customerlist)}}},[t._v("เลือกลูกค้า")])],1):t._e()],1),t._v(" "),l("client-only",[l("v-simple-table",{staticClass:"tablelist w-100 mt-3 text-center",scopedSlots:t._u([{key:"default",fn:function(){return[l("thead",{staticClass:"tablelist w-100 text-center"},[l("th",{staticClass:"title text-center"},[t._v("รหัสลูกค้า")]),t._v(" "),l("th",{staticClass:"title text-center"},[t._v("ชื่อลูกค้า")]),t._v(" "),l("th",{staticClass:"title text-center"},[t._v("เครดิต")]),t._v(" "),l("th",{staticClass:"title text-center"},[t._v("เลขประจำตัวผู้เสียภาษี")]),t._v(" "),l("th",{staticClass:"title text-center"},[t._v("ที่อยู่")]),t._v(" "),l("th",{staticClass:"title text-center"},[t._v("เบอร์โทรศัพท์")]),t._v(" "),l("th",{staticClass:"title text-center"},[t._v("ACTION")])]),t._v(" "),l("tbody",t._l(t.form.User_customerlist,(function(i,e){return l("tr",{key:e},[l("td",{staticClass:"subtitle-1"},[t._v(t._s(i.customer_code))]),t._v(" "),l("td",{staticClass:"subtitle-1"},[t._v(t._s(i.customer_name))]),t._v(" "),l("td",{staticClass:"subtitle-1"},[t._v(t._s(i.customer_cedit)+" วัน")]),t._v(" "),l("td",{staticClass:"subtitle-1"},[t._v(t._s(i.customer_tax))]),t._v(" "),l("td",{staticClass:"subtitle-1"},[t._v(t._s(i.customer_address))]),t._v(" "),l("td",{staticClass:"subtitle-1"},[t._v(t._s(i.customer_tell))]),t._v(" "),l("td",{staticClass:"subtitle-1"},["detail"!=t.type?l("v-avatar",{attrs:{size:"26",color:"primary"},on:{click:function(l){return t.form.User_customerlist.splice(e,1)}}},[l("v-icon",{staticClass:"text-white",attrs:{small:""}},[t._v("fas fa-trash")])],1):t._e()],1)])})),0)]},proxy:!0}],null,!1,3486114162)})],1)],1):t._e(),t._v(" "),"detail"!=t.type?l("v-layout",{staticClass:"mt-3"},[l("v-spacer"),t._v(" "),l("v-flex",{staticClass:"text-right"},[l("nuxt-link",{staticClass:"btn btn-danger mx-1",attrs:{to:"/users",tag:"button"}},[t._v("ยกเลิก")]),t._v(" "),l("v-btn",{staticClass:"btn-primary mx-1",attrs:{disabled:!t.valid},on:{click:function(e){return t.$emit("callback",t.form)}}},[t._v("ยืนยัน")])],1)],1):t._e(),t._v(" "),l("Modallistcustomer",{ref:"listcustomer",attrs:{dataselect:t.form.listcustomer},on:{callback:t.addcustomer}})],1)],1)}),[],!1,null,null,null);e.a=B.exports;c()(B,{VAutocomplete:S.a,VAvatar:F.a,VBtn:m.a,VCard:d.a,VCheckbox:L.a,VCol:E.a,VContainer:O.a,VFlex:h.a,VForm:j.a,VIcon:x.a,VLayout:y.a,VListItem:C.a,VListItemContent:V.a,VListItemSubtitle:V.b,VListItemTitle:V.c,VRow:z.a,VSimpleTable:A.a,VSpacer:$.a,VTextField:T.a})},485:function(t,e,l){"use strict";l.r(e);var r={components:{Formusers:l(387).a},head:function(){return{title:this.title}},data:function(){return{title:"เพิ่มผู้ดูแลระบบ",breadcrumbs:[{text:"จัดการผู้ดูแลระบบ",disabled:!1,href:"/users"},{text:"เพิ่มผู้ดูแลระบบ",disabled:!0}]}},methods:{save:function(data){var t=this;this.$axios.post("/users/create",data).then((function(e){t.$swal("Save data Success","","success"),t.$router.push("/users")})).catch((function(e){t.$swal("Save data Error","","warning")}))}},mounted:function(){this.$nextTick((function(){this.$store.dispatch("setnametitle",this.title)}))}},n=l(42),o=l(90),c=l.n(o),m=l(369),component=Object(n.a)(r,(function(){var t=this,e=t.$createElement,l=t._self._c||e;return l("div",[l("v-container",{attrs:{"grid-list-xs":""}},[l("nav",{staticClass:"breadcrumb"},t._l(t.breadcrumbs,(function(i,e){return l("nuxt-link",{key:e,staticClass:"breadcrumb-item",class:{active:e==t.breadcrumbs.length-1},attrs:{tag:"a",to:i.href?i.href:""}},[t._v(t._s(i.text))])})),1)]),t._v(" "),l("Formusers",{attrs:{type:"add"},on:{callback:t.save}})],1)}),[],!1,null,null,null);e.default=component.exports;c()(component,{VContainer:m.a})}}]);